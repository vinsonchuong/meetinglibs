---
language: ruby
bundler_args: --without development
rvm:
  - 1.9.3

env:
  global:
    - secure: "ssfpq4XY3RUl6j8eUnDrq2GB+LwGl2Vdly2ffbBkggdUtVP1rHsv2/NXuLiN\nXAFStwVYxIJEyCVSh2sGqTsSgIoe5ogtIaYOAzi9zY2G+ddoUo11R3n4PzkX\nR3+SQyqO6n6w95KqaxLQnUVTxxptO5Yk+0HpC3KeZN4R/fbC+x4="
    - POSTGRES_USER=postgres

branches:
  only:
    - master
    - /^feature-.*$/

before_script:
  - psql -U $POSTGRES_USER -c 'create database meetinglibs_test;'

script:
  - bundle exec rake db:setup db:test:prepare
  - bundle exec rspec
  - bundle exec guard-jasmine
